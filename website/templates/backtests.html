{% extends 'base.html' %}

{% block content %}
{% load static %}

{% include 'sidebar.html' %}

<div class="main">
    <nav class="navbar navbar-expand navbar-light navbar-bg">
                    <a class="sidebar-toggle js-sidebar-toggle">
                      <i class="hamburger align-self-center"></i>
                    </a>

<!--                    <div class="navbar-collapse collapse">-->
<!--                        <ul class="navbar-nav navbar-align">-->
<!--                            <li class="nav-item dropdown">-->
<!--                                <a class="nav-icon dropdown-toggle" href="#" id="alertsDropdown" data-bs-toggle="dropdown">-->
<!--                                    <div class="position-relative">-->
<!--                                        <i class="align-middle" data-feather="bell"></i>-->
<!--                                        <span class="indicator">4</span>-->
<!--                                    </div>-->
<!--                                </a>-->
<!--                                <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end py-0" aria-labelledby="alertsDropdown">-->
<!--                                    <div class="dropdown-menu-header">-->
<!--                                        4 New Notifications-->
<!--                                    </div>-->
<!--                                    <div class="list-group">-->
<!--                                        <a href="#" class="list-group-item">-->
<!--                                            <div class="row g-0 align-items-center">-->
<!--                                                <div class="col-2">-->
<!--                                                    <i class="text-danger" data-feather="alert-circle"></i>-->
<!--                                                </div>-->
<!--                                                <div class="col-10">-->
<!--                                                    <div class="text-dark">Update completed</div>-->
<!--                                                    <div class="text-muted small mt-1">Restart server 12 to complete the update.</div>-->
<!--                                                    <div class="text-muted small mt-1">30m ago</div>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </a>-->
<!--                                        <a href="#" class="list-group-item">-->
<!--                                            <div class="row g-0 align-items-center">-->
<!--                                                <div class="col-2">-->
<!--                                                    <i class="text-warning" data-feather="bell"></i>-->
<!--                                                </div>-->
<!--                                                <div class="col-10">-->
<!--                                                    <div class="text-dark">Lorem ipsum</div>-->
<!--                                                    <div class="text-muted small mt-1">Aliquam ex eros, imperdiet vulputate hendrerit et.</div>-->
<!--                                                    <div class="text-muted small mt-1">2h ago</div>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </a>-->
<!--                                        <a href="#" class="list-group-item">-->
<!--                                            <div class="row g-0 align-items-center">-->
<!--                                                <div class="col-2">-->
<!--                                                    <i class="text-primary" data-feather="home"></i>-->
<!--                                                </div>-->
<!--                                                <div class="col-10">-->
<!--                                                    <div class="text-dark">Login from 192.186.1.8</div>-->
<!--                                                    <div class="text-muted small mt-1">5h ago</div>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </a>-->
<!--                                        <a href="#" class="list-group-item">-->
<!--                                            <div class="row g-0 align-items-center">-->
<!--                                                <div class="col-2">-->
<!--                                                    <i class="text-success" data-feather="user-plus"></i>-->
<!--                                                </div>-->
<!--                                                <div class="col-10">-->
<!--                                                    <div class="text-dark">New connection</div>-->
<!--                                                    <div class="text-muted small mt-1">Christina accepted your request.</div>-->
<!--                                                    <div class="text-muted small mt-1">14h ago</div>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </a>-->
<!--                                    </div>-->
<!--                                    <div class="dropdown-menu-footer">-->
<!--                                        <a href="#" class="text-muted">Show all notifications</a>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </li>-->
<!--                            <li class="nav-item dropdown">-->
<!--                                <a class="nav-icon dropdown-toggle" href="#" id="messagesDropdown" data-bs-toggle="dropdown">-->
<!--                                    <div class="position-relative">-->
<!--                                        <i class="align-middle" data-feather="message-square"></i>-->
<!--                                    </div>-->
<!--                                </a>-->
<!--                                <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end py-0" aria-labelledby="messagesDropdown">-->
<!--                                    <div class="dropdown-menu-header">-->
<!--                                        <div class="position-relative">-->
<!--                                            4 New Messages-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <div class="list-group">-->
<!--                                        <a href="#" class="list-group-item">-->
<!--                                            <div class="row g-0 align-items-center">-->
<!--                                                <div class="col-2">-->
<!--                                                    <img src="img/avatars/avatar-5.jpg" class="avatar img-fluid rounded-circle" alt="Vanessa Tucker">-->
<!--                                                </div>-->
<!--                                                <div class="col-10 ps-2">-->
<!--                                                    <div class="text-dark">Vanessa Tucker</div>-->
<!--                                                    <div class="text-muted small mt-1">Nam pretium turpis et arcu. Duis arcu tortor.</div>-->
<!--                                                    <div class="text-muted small mt-1">15m ago</div>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </a>-->
<!--                                        <a href="#" class="list-group-item">-->
<!--                                            <div class="row g-0 align-items-center">-->
<!--                                                <div class="col-2">-->
<!--                                                    <img src="img/avatars/avatar-2.jpg" class="avatar img-fluid rounded-circle" alt="William Harris">-->
<!--                                                </div>-->
<!--                                                <div class="col-10 ps-2">-->
<!--                                                    <div class="text-dark">William Harris</div>-->
<!--                                                    <div class="text-muted small mt-1">Curabitur ligula sapien euismod vitae.</div>-->
<!--                                                    <div class="text-muted small mt-1">2h ago</div>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </a>-->
<!--                                        <a href="#" class="list-group-item">-->
<!--                                            <div class="row g-0 align-items-center">-->
<!--                                                <div class="col-2">-->
<!--                                                    <img src="img/avatars/avatar-4.jpg" class="avatar img-fluid rounded-circle" alt="Christina Mason">-->
<!--                                                </div>-->
<!--                                                <div class="col-10 ps-2">-->
<!--                                                    <div class="text-dark">Christina Mason</div>-->
<!--                                                    <div class="text-muted small mt-1">Pellentesque auctor neque nec urna.</div>-->
<!--                                                    <div class="text-muted small mt-1">4h ago</div>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </a>-->
<!--                                        <a href="#" class="list-group-item">-->
<!--                                            <div class="row g-0 align-items-center">-->
<!--                                                <div class="col-2">-->
<!--                                                    <img src="img/avatars/avatar-3.jpg" class="avatar img-fluid rounded-circle" alt="Sharon Lessman">-->
<!--                                                </div>-->
<!--                                                <div class="col-10 ps-2">-->
<!--                                                    <div class="text-dark">Sharon Lessman</div>-->
<!--                                                    <div class="text-muted small mt-1">Aenean tellus metus, bibendum sed, posuere ac, mattis non.</div>-->
<!--                                                    <div class="text-muted small mt-1">5h ago</div>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </a>-->
<!--                                    </div>-->
<!--                                    <div class="dropdown-menu-footer">-->
<!--                                        <a href="#" class="text-muted">Show all messages</a>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </li>-->
<!--                            <li class="nav-item dropdown">-->
<!--                                <a class="nav-icon dropdown-toggle d-inline-block d-sm-none" href="#" data-bs-toggle="dropdown">-->
<!--                    <i class="align-middle" data-feather="settings"></i>-->
<!--                  </a>-->

<!--                                <a class="nav-link dropdown-toggle d-none d-sm-inline-block" href="#" data-bs-toggle="dropdown">-->
<!--                    <img src="img/avatars/avatar.jpg" class="avatar img-fluid rounded me-1" alt="Charles Hall" /> <span class="text-dark">Charles Hall</span>-->
<!--                  </a>-->
<!--                                <div class="dropdown-menu dropdown-menu-end">-->
<!--                                    <a class="dropdown-item" href="pages-profile.html"><i class="align-middle me-1" data-feather="user"></i> Profile</a>-->
<!--                                    <a class="dropdown-item" href="#"><i class="align-middle me-1" data-feather="pie-chart"></i> Analytics</a>-->
<!--                                    <div class="dropdown-divider"></div>-->
<!--                                    <a class="dropdown-item" href="index.html"><i class="align-middle me-1" data-feather="settings"></i> Settings & Privacy</a>-->
<!--                                    <a class="dropdown-item" href="#"><i class="align-middle me-1" data-feather="help-circle"></i> Help Center</a>-->
<!--                                    <div class="dropdown-divider"></div>-->
<!--                                    <a class="dropdown-item" href="#">Log out</a>-->
<!--                                </div>-->
<!--                            </li>-->
<!--                        </ul>-->
<!--                    </div>-->
                </nav>

    <main class="content">
        <div class="container-fluid p-0">

            <h1 class="h3 mb-3"><strong>{{ current_strat_dict.strategy_name }}</strong></h1>
            <!-- strategy description and asset dropdown          -->
            <div class="row">
						<div class="col-12 col-lg-8 col-xxl-9 d-flex">
							<div class="card flex-fill">
								<div class="card-header">
									<h5 class="card-title mb-0">Description</h5>
								</div>

                                <div class="card-body">
                                    <div class="mb-0">
                                        <p>{{ current_strat_dict.strategy_description }}</p>
                                    </div>
                                </div>
							</div>
						</div>
						<div class="col-12 col-lg-4 col-xxl-3 d-flex">
							<div class="card flex-fill w-100">
								<div class="card-header">

									<h5 class="card-title mb-0">See Results For:</h5>
								</div>
								<div class="card-body d-flex w-100">
                                    <select class="form-select mb-3">
                                      <option selected="">{{current_asset_dict.asset_name}}</option>
                                    <!-- LOOP THROUGH OPTIONS HERE   -->
                                        {% for asset in all_assets_list_dict %}
                                            {% if current_asset_dict.asset_id != asset.asset_id %}
                                                <option>
                                                    <a href="{% url 'backtests' current_strat_dict.strategy_name|slugify asset.asset_ticker|slugify %}">
                                                        <span style="font-size:12px" class="align-center">{{ asset.asset_name }}</span>
                                                    </a>
                                                </option>
                                            {% endif %}
                                        {% endfor %}

                                    </select>
								</div>
							</div>
						</div>
					</div>

            <!-- example pic            -->
            <div class="row">
                 <div class="col-12">
                     <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="accordion" id="accordionExample">
                                  <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingOne">
                                       <a class="nav-link dropdown-toggle" id="alertsDropdown" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                            <span class="text-dark">Strategy Example</span>
                                       </a>
                                       <hr>
                                    </h2>
                                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                      <div class="accordion-body">
                                           <a href="{% static strat_image_path|safe %}" target="_blank">
                                               <img src="{% static strat_image_path|safe %}" class="img-fluid rounded mx-auto d-block">
                                           </a>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--    STRATEGY RESULTS-->
            <h1 class="h3 mb-3"><strong>Strategy Results for {{ current_asset_dict.asset_name }} on {{timeframe}}</strong></h1>
            <!-- current month results           -->
            <div class="row">
                 <div class="col-12">
                     <div class="card">
                         <div class="card-header">
                            <div class="row">
                                <div class="col mt-0">
                                    <h3 class="card-title">Current Month Results:</h3>
                                    <h5>Of {{current_month_data.count}} Permutations for {{ current_month_data.start_date }} to {{ current_month_data.end_date }}</h5>
                                    <h4>Best Performing Permutations</h4>
                                </div>
                            </div>
                            <table class="table table-hover my-0">
									<thead>
										<tr>
											<th scope="col">Total R </th>
                                            <th scope="col">Strike Rate</th>
                                            <th scope="col">Expectancy</th>
                                            <th scope="col">Num Trades</th>
                                            <th scope="col"></th>
										</tr>
									</thead>
									<tbody>
                                        {% for t in current_month_data.top_winning_strats %}
                                        <tr>
                                            <td>{{ t.total_realized_r }}</td>
                                            <td>{{ t.strike_rate }}</td>
                                            <td>{{ t.expectancy }}</td>
                                            <td>{{ t.num_trades }}</td>
                                            <td>
                                                <a href="{% url 'Evaluation Results' current_strat_dict.strategy_name|slugify current_asset_dict.asset_ticker|slugify t.strat_parameters_id %}"> ...more </a>
                                            </td>
                                        </tr>
                                        {% endfor %}
									</tbody>
								</table>
                         </div>
                         <div class="card-header">
                             <div class="row">
                                <div class="col mt-0">
                                    <h4>Worst Performing Permutations</h4>
                                </div>
                            </div>
                            <table class="table table-hover my-0">
									<thead>
										<tr>
											<th scope="col">Total R </th>
                                            <th scope="col">Strike Rate</th>
                                            <th scope="col">Expectancy</th>
                                            <th scope="col">Num Trades</th>
                                            <th scope="col"></th>
										</tr>
									</thead>
									<tbody>
                                        {% for t in current_month_data.top_losing_strats %}
                                        <tr>
                                            <td>{{ t.total_realized_r }}</td>
                                            <td>{{ t.strike_rate }}</td>
                                            <td>{{ t.expectancy }}</td>
                                            <td>{{ t.num_trades }}</td>
                                            <td>
                                                <a href="{% url 'Evaluation Results' current_strat_dict.strategy_name|slugify current_asset_dict.asset_ticker|slugify t.strat_parameters_id %}"> ...more </a>
                                            </td>
                                        </tr>
                                        {% endfor %}
									</tbody>
								</table>
                         </div>
                    </div>
                </div>
            </div>
            <!-- prev month results         -->
            <div class="row">
                 <div class="col-12">
                     <div class="card">
                         <div class="card-header">
                            <div class="row">
                                <div class="col mt-0">
                                    <h3 class="card-title">Previous Month Results:</h3>
                                    <h5>Of {{previous_month_data.count}} Permutations {{ previous_month_data.start_date }} to {{ previous_month_data.end_date }}</h5>
                                    <h4>Top Winning Permutations</h4>
                                </div>
                            </div>
                            <table class="table table-hover my-0">
                                <thead>
                                    <tr>
                                        <th scope="col">Total R </th>
                                        <th scope="col">Strike Rate</th>
                                        <th scope="col">Expectancy</th>
                                        <th scope="col">Num Trades</th>
                                        <th scope="col"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for t in previous_month_data.top_winning_strats %}
                                        <tr>
                                            <td>{{ t.total_realized_r }}</td>
                                            <td>{{ t.strike_rate }}</td>
                                            <td>{{ t.expectancy }}</td>
                                            <td>{{ t.num_trades }}</td>
                                            <td>
                                                <a href="{% url 'Evaluation Results' current_strat_dict.strategy_name|slugify current_asset_dict.asset_ticker|slugify t.strat_parameters_id %}"> ...more </a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                         </div>
                         <div class="card-header">
                             <div class="row">
                                <div class="col mt-0">
                                    <h4>Worst Performing Permutations</h4>
                                </div>
                            </div>
                             <table class="table table-hover my-0">
                                <thead>
                                    <tr>
                                        <th scope="col">Total R </th>
                                        <th scope="col">Strike Rate</th>
                                        <th scope="col">Expectancy</th>
                                        <th scope="col">Num Trades</th>
                                        <th scope="col"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for t in previous_month_data.top_losing_strats %}
                                        <tr>
                                            <td>{{ t.total_realized_r }}</td>
                                            <td>{{ t.strike_rate }}</td>
                                            <td>{{ t.expectancy }}</td>
                                            <td>{{ t.num_trades }}</td>
                                            <td>
                                                <a href="{% url 'Evaluation Results' current_strat_dict.strategy_name|slugify current_asset_dict.asset_ticker|slugify t.strat_parameters_id %}"> ...more </a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                         </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container-fluid">
            <div class="row text-muted">
                <div class="col-6 text-start">
<!--                    <p class="mb-0">-->
<!--                        <a class="text-muted" href="https://adminkit.io/" target="_blank"><strong>AdminKit</strong></a> &copy;-->
<!--                    </p>-->
                </div>
                <div class="col-6 text-end">
<!--                    <ul class="list-inline">-->
<!--                        <li class="list-inline-item">-->
<!--                            <a class="text-muted" href="https://adminkit.io/" target="_blank">Support</a>-->
<!--                        </li>-->
<!--                        <li class="list-inline-item">-->
<!--                            <a class="text-muted" href="https://adminkit.io/" target="_blank">Help Center</a>-->
<!--                        </li>-->
<!--                        <li class="list-inline-item">-->
<!--                            <a class="text-muted" href="https://adminkit.io/" target="_blank">Privacy</a>-->
<!--                        </li>-->
<!--                        <li class="list-inline-item">-->
<!--                            <a class="text-muted" href="https://adminkit.io/" target="_blank">Terms</a>-->
<!--                        </li>-->
<!--                    </ul>-->
                </div>
            </div>
        </div>
    </footer>
</div>

{% endblock %}